# Deploy to Azure Product Owner: AZSQL FastMCP Server
#
# The Azure Developer CLI (azd) is used to develop, deploy, and monitor this application.
# To learn more, visit: https://learn.microsoft.com/azure/developer/azure-developer-cli/

name: azsql-fastmcp
metadata:
  template: azsql-fastmcp@0.0.1-beta

# Define services to deploy to Azure
services:
  azsql-fastmcp: # Service name
    project: . # The path to the service source code
    language: python
    host: containerapp # Azure service to use (containerapp, appservice, function, staticwebapp)
    hooks:
      postdeploy:
        windows:
          shell: pwsh
          run: |
            Write-Host "ðŸš€ FastMCP Azure SQL Server deployed successfully!"
            Write-Host "ðŸ“Š Health endpoint: $env:SERVICE_WEB_ENDPOINT_URL/health"
            Write-Host "ðŸ“ˆ Metrics endpoint: $env:SERVICE_WEB_ENDPOINT_URL/metrics"
            Write-Host "ðŸ”Œ MCP endpoint: $env:SERVICE_WEB_ENDPOINT_URL/mcp"
        posix:
          shell: sh
          run: |
            echo "ðŸš€ FastMCP Azure SQL Server deployed successfully!"
            echo "ðŸ“Š Health endpoint: $SERVICE_WEB_ENDPOINT_URL/health"
            echo "ðŸ“ˆ Metrics endpoint: $SERVICE_WEB_ENDPOINT_URL/metrics"  
            echo "ðŸ”Œ MCP endpoint: $SERVICE_WEB_ENDPOINT_URL/mcp"
