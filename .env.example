# Azure SQL Database MCP Server Configuration
# Enhanced with Managed Identity Support
# Copy this file to .env and update with your actual database credentials

# =============================================================================
# Database Configuration
# =============================================================================

# Azure SQL Server (without tcp: prefix - will be added automatically)
AZURE_SQL_SERVER=your-server.database.windows.net

# Database name
AZURE_SQL_DATABASE=your-database-name

# =============================================================================
# Authentication Configuration
# =============================================================================

# Authentication type: 'sql', 'managed_identity', or 'default_credential'
# - sql: Traditional SQL authentication with username/password
# - managed_identity: Azure Managed Identity authentication
# - default_credential: Azure DefaultAzureCredential (for development)
AZURE_SQL_AUTH_TYPE=managed_identity

# SQL Authentication credentials (only required when AZURE_SQL_AUTH_TYPE=sql)
AZURE_SQL_USERNAME=your-username
AZURE_SQL_PASSWORD=your-password

# Managed Identity Configuration (only for user-assigned managed identity)
# Leave empty for system-assigned managed identity
# Set to your managed identity client ID for user-assigned managed identity
AZURE_MANAGED_IDENTITY_CLIENT_ID=id-AcraSalesAnalytics2

# Connection settings (optional - defaults will be used if not specified)
AZURE_SQL_DRIVER=ODBC Driver 18 for SQL Server
AZURE_SQL_ENCRYPT=yes
AZURE_SQL_TRUST_SERVER_CERTIFICATE=no
AZURE_SQL_CONNECTION_TIMEOUT=30

# =============================================================================
# Streaming HTTP Server Configuration (FastMCP 2.9.2+)
# =============================================================================

# Server host and port
MCP_HTTP_HOST=127.0.0.1
MCP_HTTP_PORT=8000

# HTTP transport paths
MCP_API_PATH=/mcp
MCP_HEALTH_PATH=/health
MCP_METRICS_PATH=/metrics

# =============================================================================
# FastMCP 2.9.2+ Advanced Features
# =============================================================================

# Enable HTTP compression for better performance
MCP_ENABLE_COMPRESSION=true

# Enable CORS for web browser compatibility
MCP_ENABLE_CORS=true

# Maximum concurrent requests
MCP_MAX_CONCURRENT_REQUESTS=100

# Use JSON response format (for compatibility with some clients)
MCP_JSON_RESPONSE=false

# Use stateless HTTP mode (new transport per request)
MCP_STATELESS_HTTP=false

# Enable debug mode for development
MCP_DEBUG_MODE=false

# =============================================================================
# Streaming Features Configuration
# =============================================================================

# Enable streaming HTTP transport
MCP_ENABLE_STREAMING=true

# Stream timeout in seconds (5 minutes default)
MCP_STREAM_TIMEOUT=300

# Maximum stream size in bytes (10MB default)
MCP_MAX_STREAM_SIZE=10485760

# =============================================================================
# Performance Configuration
# =============================================================================

# Connection pool size (0 = disabled)
CONNECTION_POOL_SIZE=5

# Test mode (disable for production)
TEST_MODE=false

# Maximum request history for metrics
MAX_REQUEST_HISTORY=100

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# =============================================================================
# Example Server Endpoints (after starting the server)
# =============================================================================
# Main API:     http://127.0.0.1:8000/mcp
# Health Check: http://127.0.0.1:8000/health
# Metrics:      http://127.0.0.1:8000/metrics
# =============================================================================
